extends layout.pug

block content
  -
    const formatDate = (dateString) => {
      const date = new Date(dateString);
      return date.toLocaleString();
    }
  main.articles-category
    h1 Бизнес
    section.articles-category__theme-list
      h2.visually-hidden Список тем
      ul.themes
        each category in categories
          li.themes__item
            a.themes__item-link(href='#')
              | #{category.name}
              sup #{category.count}
    section.articles-category__list.preview
      h2.visually-hidden Список превью статей
      ul.preview__list
        li.preview__item
          ul.preview__breadcrumbs
           each category in article.categories
            li.preview__breadcrumbs-item
              a.preview__breadcrumbs-link(href=`/articles/category/${category.id}`) #{category.name}
          if (article.picture)    
          .preview__background
            img.preview__background-image(src=`/img/${article.picture}` width='460' height='240' alt='Фотография небоскреба')
          time.preview__time(datetime=`${article.createdAt}`) #{formatDate(article.createdAt)}
          h3.preview__name
            a.preview__name-link(href=`/articles/${article.id}`) #{article.title}
          p.preview__text #{article.announce}
          a.preview__comment(href='/my/comments')
            | Комментарии
            span.preview__cloud
            b.preview__comment-count 12
